{% extends 'base.html' %}

{% block title %}Settings{% endblock %}

{% block content %}
    <h1>Settings</h1>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">Add New API Key</h5>
            <form method="POST" action="{{ url_for('site.settings') }}">
                <div class="input-group">
                    <input type="text" class="form-control" name="api_key" placeholder="Enter new API key">
                    <button type="submit" class="btn btn-primary">Add Key</button>
                </div>
            </form>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Your API Keys</h5>
            {% if keys %}
                <ul class="list-group">
                    {% for key in keys %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>{{ key.key[:4] }}...{{ key.key[-4:] }}</span>
                            <form method="POST" action="{{ url_for('site.delete_key', key_id=key.id) }}" style="display: inline;">
                                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>You haven't added any API keys yet.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}
